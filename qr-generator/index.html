
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>QR Code Generator (Offline)</title>
<style>
  :root{
    --brand:#089CA4;         /* your theme color */
    --brand-600:#078992;
    --panel:#ffffff;
    --text:#0b1f22;
    --muted:#5a6a6d;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    background:linear-gradient(135deg,#e9fbfd 0%, #ffffff 55%);
    color:var(--text);
  }
  header{ padding:20px 16px 0; text-align:center; }
  .title{ font-size:clamp(20px,3vw,28px); font-weight:700; color:#05565c; }
  .wrap{
    max-width:980px; margin:18px auto 40px; padding:0 16px 32px;
    display:grid; grid-template-columns: 1.1fr .9fr; gap:22px;
  }
  @media (max-width:900px){ .wrap{grid-template-columns:1fr} }
  .card{
    background:var(--panel);
    border:1px solid #e6f5f7;
    border-radius:14px;
    box-shadow:0 6px 20px rgba(8,156,164,.10);
    padding:18px;
  }
  .card h2{ margin:0 0 12px; font-size:18px; color:#05565c; }
  label{ display:block; font-size:13px; color:var(--muted); margin:12px 0 6px; }
  .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
  textarea, select, input[type="number"], input[type="color"]{
    width:100%; padding:10px 12px; border:1px solid #cfecef; border-radius:10px;
    outline:none; background:#f7feff; color:#033c41;
  }
  textarea{ min-height:84px; resize:vertical; }
  textarea:focus, select:focus, input:focus{
    border-color:var(--brand); box-shadow:0 0 0 3px rgba(8,156,164,.18);
  }
  .btn{
    appearance:none; border:0; background:var(--brand); color:white;
    padding:10px 14px; border-radius:10px; font-weight:600; cursor:pointer;
    box-shadow:0 6px 16px rgba(8,156,164,.25);
    transition:.15s transform ease, .15s background ease, .15s box-shadow ease;
  }
  .btn:hover{ background:var(--brand-600); transform:translateY(-1px); }
  .btn.secondary{
    background:#e8fcfe; color:#066c73; box-shadow:none; border:1px solid #bdebf0;
  }
  .hint{ font-size:12px; color:#4a6b6e; }
  .qrStage{
    display:grid; place-items:center; min-height:360px; padding:16px;
    background:conic-gradient(from 180deg at 50% 50%, #f2feff, #ffffff, #f2feff);
    border:1px dashed #cfecef; border-radius:12px;
  }
  .qrBox{
    background:white; padding:16px; border-radius:12px; border:1px solid #e8f6f8;
    box-shadow:0 10px 24px rgba(8,156,164,.15);
  }
  .actions{ display:flex; flex-wrap:wrap; gap:10px; margin-top:12px; }
  footer{ text-align:center; color:#5f7b7e; font-size:12px; margin:18px 0 26px; }
</style>
</head>
<body>
  <header>
    <div class="title">QR Code Generator — Offline • Theme <span style="color:#089CA4">#089CA4</span></div>
  </header>

  <div class="wrap">
    <!-- Left: Controls -->
    <section class="card">
      <h2>Content</h2>
      <label for="qrText">Text / URL</label>
      <textarea id="qrText" placeholder="Enter URL, text, mailto:, tel:, or anything…">https://tpv-munich.github.io/SeeLyra-Acty/</textarea>
      <div class="hint">Tip: Paste SharePoint links, internal routes, or deep links to forms.</div>

      <h2 style="margin-top:18px;">Appearance</h2>
      <div class="row">
        <div style="flex:1">
          <label for="size">Size (px)</label>
          <input type="number" id="size" value="320" min="120" max="1024" step="20" />
        </div>
        <div style="width:140px">
          <label for="ec">Error Correction</label>
          <select id="ec">
            <option value="L">L (7%)</option>
            <option value="M" selected>M (15%)</option>
            <option value="Q">Q (25%)</option>
            <option value="H">H (30%)</option>
          </select>
        </div>
      </div>
      <div class="row">
        <div style="flex:1">
          <label for="fg">Foreground</label>
          <input type="color" id="fg" value="#089CA4" />
        </div>
        <div style="flex:1">
          <label for="bg">Background</label>
          <input type="color" id="bg" value="#FFFFFF" />
        </div>
      </div>

      <div class="row" style="margin-top:12px">
        <button class="btn" id="btnGenerate">Generate</button>
        <button class="btn secondary" id="btnClear">Clear</button>
      </div>
      <div class="hint" style="margin-top:6px">Runs entirely in your browser • No third parties • No network calls</div>
    </section>

    <!-- Right: Preview -->
    <section class="card">
      <h2>Preview & Export</h2>
      <div class="qrStage">
        <div id="qrContainer" class="qrBox" role="img" aria-label="QR code preview"></div>
      </div>
      <div class="actions">
        <button class="btn" id="btnPng">Download PNG</button>
        <button class="btn secondary" id="btnCopy">Copy PNG to Clipboard</button>
      </div>
      <div class="hint" id="status" style="margin-top:6px"></div>
    </section>
  </div>

  <footer>Local-only QR generator • Ideal for Storyline Web Object and intranet use.</footer>

  <!-- =========================
       Inline QR library (qrcodejs, MIT)
       ========================= -->
  <script>
  /*! qrcodejs (MIT) - minified for inline use (essential parts kept) */
  !function(o){function u(o){this.mode=d.MODE_8BIT_BYTE,this.data=o,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var t=[],n=this.data.charCodeAt(e);n>65536?(t[0]=240|(1835008&n)>>>18,t[1]=128|(258048&n)>>>12,t[2]=128|(4032&n)>>>6,t[3]=128|63&n):n>2048?(t[0]=224|(61440&n)>>>12,t[1]=128|(4032&n)>>>6,t[2]=128|63&n):n>128?(t[0]=192|(1984&n)>>>6,t[1]=128|63&n):t[0]=n,this.parsedData.push(t)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function h(o,e){this.typeNumber=o,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function l(o,e){if(void 0==o.length)throw new Error(o.length+"/"+e);for(var r=0;r<o.length&&0==o[r];)r++;this.num=new Array(o.length-r+e);for(var t=0;t<o.length-r;t++)this.num[t]=o[t+r]}function f(o,e){this.totalCount=o,this.dataCount=e}function g(){this.buffer=[],this.length=0}function m(){var o=!1,e=navigator.userAgent;return(-1!=e.indexOf("iPhone")||-1!=e.indexOf("iPad")||-1!=e.indexOf("iPod"))&&(o=!0),o}function p(o,e){for(var r=1,t=i.getRSBlocks(o,e),n=0;n<t.length;n++)r+=t[n].dataCount;var a=new g;for(n=0;n<r;n++)a.put(0,1);return i.getLostPoint(i.createData(o,e,a))}var d={};u.prototype={getLength:function(){return this.parsedData.length},write:function(o){for(var e=0,r=this.parsedData.length;e<r;e++)o.put(this.parsedData[e],8)}},d.PAD0=236,d.PAD1=17,d.createData=function(o,e,r){for(var t=i.getRSBlocks(o,e),n=new g,a=0;a<r.length;a++){var s=r[a];n.put(s.mode,4),n.put(s.getLength(),i.getLengthInBits(s.mode,o)),s.write(n)}for(var h=0,l=0;l<t.length;l++)h+=t[l].dataCount;if(n.getLengthInBits()>8*h)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+8*h+")");for(n.getLengthInBits()+4<=8*h&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*h||(n.put(d.PAD0,8),n.getLengthInBits()>=8*h));)n.put(d.PAD1,8);return d.createBytes(n,t)};var i=h;i.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];i.getLostPoint=function(o){for(var e=o.getModuleCount(),r=0,t=0;t<e;t++)for(var n=0;n<e;n++){for(var a=0,s=o.isDark(t,n),h=-1;h<=1;h++)if(!(t+h<0||e<=t+h))for(var l=-1;l<=1;l++)n+l<0||e<=n+l||(0!=h||0!=l)&&s==o.isDark(t+h,n+l)&&a++;a>5&&(r+=3+a-5)}for(t=0;t<e-1;t++)for(n=0;n<e-1;n++){var f=0;o.isDark(t,n)&&f++,o.isDark(t+1,n)&&f++,o.isDark(t,n+1)&&f++,o.isDark(t+1,n+1)&&f++,(0==f||4==f)&&(r+=3)}for(t=0;t<e;t++)for(n=0;n<e-6;n++)o.isDark(t,n)&&!o.isDark(t,n+1)&&o.isDark(t,n+2)&&o.isDark(t,n+3)&&o.isDark(t,n+4)&&!o.isDark(t,n+5)&&o.isDark(t,n+6)&&(r+=40);for(n=0;n<e;n++)for(t=0;t<e-6;t++)o.isDark(t,n)&&!o.isDark(t+1,n)&&o.isDark(t+2,n)&&o.isDark(t+3,n)&&o.isDark(t+4,n)&&!o.isDark(t+5,n)&&o.isDark(t+6,n)&&(r+=40);for(var g=0,m=0,p=0;n<e;n++){for(t=0;t<e;t++)o.isDark(t,n)&&g++;m+=g;var d=Math.abs(100*g/e-50)/5;p+=d}return r+=10*p};var a={};a.glog=function(o){if(o<1)throw new Error("glog("+o+")");return a.LOG_TABLE[o]},a.gexp=function(o){for(;o<0;)o+=255;for(;o>=256;)o-=255;return a.EXP_TABLE[o]},a.LOG_TABLE=new Array(256),a.EXP_TABLE=new Array(256);for(var s=0;s<8;s++)a.EXP_TABLE[s]=1<<s;for(s=8;s<256;s++)a.EXP_TABLE[s]=a.EXP_TABLE[s-4]^a.EXP_TABLE[s-5]^a.EXP_TABLE[s-6]^a.EXP_TABLE[s-8];for(s=0;s<255;s++)a.LOG_TABLE[a.EXP_TABLE[s]]=s;var r=function(o,e){this.num=new Array(o),e&&this.set(e)};r.prototype={set:function(o){for(var e=Math.min(this.num.length,o.length),r=0;r<e;r++)this.num[r]=o[r]},getLength:function(){return this.num.length},at:function(o){return this.num[o]}},rsBlock=function(o,e){this.data=o,this.ecc=new Array(e)},gClass=function(o){r.call(this,o)};gClass.prototype=Object.create(r.prototype);gClass.prototype.constructor=gClass;g.prototype={get:function(o){var e=Math.floor(o/8);return 1==(this.buffer[e]>>>7-o%8&1)},put:function(o,e){for(var r=0;r<e;r++)this.putBit(1==(o>>>e-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(o){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),o&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var v={L:1,M:0,Q:3,H:2};h.prototype={addData:function(o){this.dataList.push(new u(o)),this.dataCache=null},isDark:function(o,e){if(o<0||this.moduleCount<=o||e<0||this.moduleCount<=e)throw new Error(o+","+e);return this.modules[o][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(o,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++)this.modules[r][t]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(o,e),this.typeNumber>=7&&this.setupTypeNumber(o),this.dataCache||(this.dataCache=d.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(o,e){for(var r=-1;r<=7;r++)if(!(o+r<=-1||this.moduleCount<=o+r))for(var t=-1;t<=7;t++)e+t<=-1||this.moduleCount<=e+t||(this.modules[o+r][e+t]=r>=0&&r<=6&&(0==t||6==t)||t>=0&&t<=6&&(0==r||6==r)||r>=2&&r<=4&&t>=2&&t<=4)},getBestMaskPattern:function(){for(var o=0,e=0,r=0;r<8;r++){this.makeImpl(!0,r);var t=i.getLostPoint(this);(0==r||o>t)&&(o=t,e=r)}return e},createData:function(){var o=new g;for(var e=0;e<this.dataList.length;e++){var r=this.dataList[e];o.put(r.mode,4),o.put(r.getLength(),i.getLengthInBits(r.mode,this.typeNumber)),r.write(o)}var t=i.getRSBlocks(this.typeNumber,this.errorCorrectLevel),n=0;for(e=0;e<t.length;e++)n+=t[e].dataCount;if(o.getLengthInBits()>8*n)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*n+")");for(o.getLengthInBits()+4<=8*n&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*n||(o.put(d.PAD0,8),o.getLengthInBits()>=8*n));)o.put(d.PAD1,8);return d.createBytes(o,t)},setupTimingPattern:function(){for(var o=8;o<this.moduleCount-8;o++)null==this.modules[o][6]&&(this.modules[o][6]=o%2==0),null==this.modules[6][o]&&(this.modules[6][o]=o%2==0)},setupPositionAdjustPattern:function(){for(var o=i.getPatternPosition(this.typeNumber),e=0;e<o.length;e++)for(var r=0;r<o.length;r++){var t=o[e],n=o[r];if(null==this.modules[t][n])for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)this.modules[t+a][n+s]=a==-2||2==a||s==-2||2==s||0==a&&0==s}},setupTypeNumber:function(o){for(var e=i.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var t=1==(e>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=t,this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=t}},setupTypeInfo:function(o,e){for(var r=this.errorCorrectLevel<<3|e,t=i.getBCHTypeInfo(r),n=0;n<15;n++){var a=1==(t>>n&1);n<6?this.modules[n][8]=a:n<8?this.modules[n+1][8]=a:this.modules[this.moduleCount-15+n][8]=a}for(n=0;n<15;n++){a=1==(t>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=a:n<9?this.modules[8][15-n-1]=a:this.modules[8][15-n-1]=a}this.modules[this.moduleCount-8][8]=!1},mapData:function(o,e){for(var r=-1,t=this.moduleCount-1,n=7,a=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;0<=t;){for(var h=0;h<2;h++)if(null==this.modules[s-h][t]){var l=!1;a<o.length&&(l=1==(o[a]>>>n&1)),i.getMask(e,s-h,t)&&(l=!l),this.modules[s-h][t]=l}if(n--,-1==n&&(a++,n=7),t+=r,t<0||this.moduleCount<=t){t-=r,r=-r;break}}}};h.CorrectLevel=v; /* keep CorrectLevel on h */

  /* Basic drawing layer */
  var Drawer=function(el,opt){this._el=el;this._opt=opt};
  Drawer.prototype.draw=function(qr){
    var opt=this._opt, el=this._el, cnt=qr.getModuleCount();
    this.clear();
    var n=Math.round(opt.width/cnt), a=Math.round(opt.height/cnt), s=Math.max(1, Math.floor(Math.min(n,a)));
    var c=document.createElement('canvas'); c.width=cnt*s; c.height=cnt*s;
    var ctx=c.getContext('2d'); ctx.fillStyle=opt.colorLight; ctx.fillRect(0,0,c.width,c.height); ctx.fillStyle=opt.colorDark;
    for(var r=0;r<cnt;r++) for(var col=0;col<cnt;col++) if(qr.isDark(r,col)) ctx.fillRect(col*s,r*s,s,s);
    el.appendChild(c);
  };
  Drawer.prototype.clear=function(){while(this._el.firstChild)this._el.removeChild(this._el.firstChild)};

  /* Public QRCode API */
  var QR=function(el,opts){
    if(!el) throw new Error("QRCode target element is required");
    this._opt={
      width:opts.width||256,height:opts.height||256,
      colorDark:opts.colorDark||"#000000",colorLight:opts.colorLight||"#ffffff",
      correctLevel:opts.correctLevel||v.M
    };
    this._drawer=new Drawer(el,this._opt);
    this.makeCode(opts.text||"");
  };
  QR.prototype.makeCode=function(text){
    // choose type number by trial; keep it simple
    var chosen=null;
    for(var t=1;t<=40;t++){var q=new h(t,this._opt.correctLevel);q.addData(text);try{q.make();chosen=q;break}catch(e){}}
    if(!chosen){throw new Error("Failed to build QR");}
    this._drawer.draw(chosen);
  };

  /* expose */
  window.QRCode = QR;
  window.QRCode.CorrectLevel = v;   /* <-- important: expose CorrectLevel */
  }(this);
  </script>

  <!-- =========================
       Your app logic (uses QRCode)
       ========================= -->
  <script>
    const EC_MAP = { L: QRCode.CorrectLevel.L, M: QRCode.CorrectLevel.M, Q: QRCode.CorrectLevel.Q, H: QRCode.CorrectLevel.H };

    const elText = document.getElementById('qrText');
    const elSize = document.getElementById('size');
    const elEC   = document.getElementById('ec');
    const elFG   = document.getElementById('fg');
    const elBG   = document.getElementById('bg');
    const box    = document.getElementById('qrContainer');
    const status = document.getElementById('status');

    function gen() {
      const text = (elText.value || '').trim();
      const size = Math.max(120, Math.min(1024, parseInt(elSize.value || '320', 10)));
      const ec   = EC_MAP[elEC.value] || QRCode.CorrectLevel.M;
      const fg   = elFG.value || '#089CA4';
      const bg   = elBG.value || '#FFFFFF';

      box.innerHTML = '';
      status.textContent = '';

      if (!text) { status.textContent = 'Enter some text/URL above.'; return; }

      new QRCode(box, {
        text: text,
        width: size,
        height: size,
        colorDark: fg,
        colorLight: bg,
        correctLevel: ec
      });
    }

    function getCanvasFromBox() {
      const canvas = box.querySelector('canvas');
      if (canvas) return canvas;
      const img = box.querySelector('img');
      if (img) {
        const s = Math.max(120, Math.min(2048, parseInt(elSize.value || '320', 10)));
        const c = document.createElement('canvas');
        c.width = c.height = s;
        const ctx = c.getContext('2d');
        ctx.fillStyle = elBG.value || '#FFFFFF';
        ctx.fillRect(0,0,s,s);
        ctx.drawImage(img, 0, 0, s, s);
        return c;
      }
      return null;
    }

    async function downloadPNG() {
      const canvas = getCanvasFromBox();
      if (!canvas) return;
      const blob = await new Promise(res => canvas.toBlob(res, 'image/png'));
      const a = document.createElement('a');
      const safeName = (elText.value || 'qr').slice(0,80).replace(/[^a-z0-9\-_.]+/gi,'_');
      a.href = URL.createObjectURL(blob);
      a.download = `${safeName || 'qr'}.png`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(a.href);
    }

    async function copyPNG() {
      try {
        const canvas = getCanvasFromBox();
        if (!canvas || !navigator.clipboard || !window.ClipboardItem) return;
        const blob = await new Promise(res => canvas.toBlob(res, 'image/png'));
        await navigator.clipboard.write([new ClipboardItem({ 'image/png': blob })]);
        alert('QR image copied to clipboard.');
      } catch (e) {
        alert('Copy failed in this browser. Try downloading PNG instead.');
      }
    }

    function clearAll() {
      document.getElementById('qrText').value = '';
      box.innerHTML = '';
      status.textContent = '';
    }

    document.getElementById('btnGenerate').addEventListener('click', gen);
    document.getElementById('btnPng').addEventListener('click', downloadPNG);
    document.getElementById('btnCopy').addEventListener('click', copyPNG);
    document.getElementById('btnClear').addEventListener('click', clearAll);

    // Auto generate initial example
    gen();
  </script>
</body>
</html>
``
